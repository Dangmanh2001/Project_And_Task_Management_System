<div class="container-fluid mt-5">
  <h1 class="mb-4 text-center">Danh sách Vai trò</h1>

  <% if (success.length > 0) { %>
  <div class="alert alert-success">
    <% success.forEach(message => { %>
    <p><%= message %></p>
    <% }) %>
  </div>
  <% } %> <% if (error.length > 0) { %>
  <div class="alert alert-danger">
    <% error.forEach(message => { %>
    <p><%= message %></p>
    <% }) %>
  </div>
  <% } %>

  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th>STT</th>
        <th>Tên Vai trò</th>
        <th>Hành động</th>
      </tr>
    </thead>
    <tbody>
      <% roles.forEach((role,i) => { %>
      <tr>
        <td><%= i+1 %></td>
        <td><%= role.name %></td>
        <td>
          <a href="/role/<%= role.id %>/edit" class="btn btn-warning btn-sm"
            >Sửa</a
          >
          <form action="/role/<%= role.id %>/delete" method="POST" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-sm"
              onclick="return confirm('Bạn có chắc chắn muốn xóa vai trò này?');">
              Xóa
            </button>
          </form>
                    
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>

  <!-- Phân trang -->
  <% if (totalPages > 1) { %>
  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-center">
      <!-- Nút First -->
      <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
        <a class="page-link" href="?page=1" aria-label="First">
          <span aria-hidden="true">&laquo;&laquo;</span>
        </a>
      </li>
      <!-- Nút Previous -->
      <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
        <a
          class="page-link"
          href="?page=<%= currentPage - 1 %>"
          aria-label="Previous"
        >
          <span aria-hidden="true">&laquo;</span>
        </a>
      </li>
      <!-- Các số trang -->
      <% for (let i = 1; i <= totalPages; i++) { %>
      <li class="page-item <%= currentPage === i ? 'active' : '' %>">
        <a class="page-link" href="?page=<%= i %>"><%= i %></a>
      </li>
      <% } %>
      <!-- Nút Next -->
      <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
        <a
          class="page-link"
          href="?page=<%= currentPage + 1 %>"
          aria-label="Next"
        >
          <span aria-hidden="true">&raquo;</span>
        </a>
      </li>
      <!-- Nút Last -->
      <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
        <a class="page-link" href="?page=<%= totalPages %>" aria-label="Last">
          <span aria-hidden="true">&raquo;&raquo;</span>
        </a>
      </li>
    </ul>
  </nav>
  <% } %>
</div>
